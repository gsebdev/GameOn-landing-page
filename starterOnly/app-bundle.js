!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,a){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===e(o)?o:String(o)),r)}var o}var a=function(){function e(t,a,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ObjectConstructor=a,this.parameters=n,this.modalId=t,document.querySelector("main").insertAdjacentHTML("afterbegin",'<div id="'+this.modalId+'" class="bground"><div class="content"><span class="close"></span><div class="modal-body"></div></div></div></div>'),this.modalEl=document.querySelector("#"+this.modalId),this.CloseEl=document.querySelector("#"+this.modalId+" .close"),this.OpenElements=document.querySelectorAll(".modal-btn[data-target="+this.modalId+"]"),this.OpenElements.forEach((function(e){return e.addEventListener("click",r.open.bind(r))})),this.CloseEl.addEventListener("click",this.close.bind(this))}var a,n;return a=e,(n=[{key:"init",value:function(){var e=this,t=new this.ObjectConstructor(this.parameters);t.make(this.modalEl.querySelector(".modal-body")),t.init().then((function(t){"close"===t&&e.close(e)}))}},{key:"open",value:function(){this.init(this),this.modalEl.setAttribute("data-opened",!0),window.scrollTo({top:0})}},{key:"close",value:function(){this.modalEl.setAttribute("data-opened",!1),this.reset(this)}},{key:"reset",value:function(){this.modalEl.querySelector(".modal-body").innerHTML=""}}])&&t(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),e}();function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==n(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===n(o)?o:String(o)),r)}var o}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.sent=!1,this.formEl=null}var t,a;return t=e,(a=[{key:"init",value:function(){var e=this;return new Promise((function(t){e.formEl.addEventListener("submit",(function(a){a.preventDefault(),!1===e.sent?e.handleSubmit(e):!0===e.sent&&t("close")}))}))}},{key:"handleSubmit",value:function(){var e,t=this,a=this.formEl.querySelectorAll(".formData"),n=[],r={};a.forEach((function(e){var a=e.querySelectorAll("input"),o=t.validateData(a);!1!==o.hasError?(n.push(1),t.displayError(e,o.hasError)):!1===o.hasError&&(n.push(0),t.hideError(e),r[o.name]=o.value)})),e=n.reduce((function(e,t){return e+t}),0),n.length===a.length&&0===e&&this.send(r)}},{key:"make",value:function(e){var t="";t+='<form id="'.concat(this.form.id,'" name="').concat(this.form.name,'" action="').concat(this.form.action,'" method="').concat(this.form.method,'" novalidate><div class="loader"></div><span class="success-msg"></span>'),this.form.data.forEach((function(e){e.before_html&&(t+=e.before_html),t+='<div class="formData">',e.inputs.forEach((function(a){e.label_after?t+='<input class="'.concat(!!e.input_class&&e.input_class,'" type="').concat(e.type,'" id="').concat(a.id,'" name="').concat(e.name,'" ').concat(!!a.required&&"required",' /><label class="').concat(!!e.label_class&&e.label_class,'" for="').concat(a.id,'">').concat(a.label,"</label>\n                    "):t+='<label class="'.concat(!!e.label_class&&e.label_class,'" for="').concat(a.id,'">').concat(a.label,'</label><br>\n                    <input class="').concat(!!e.input_class&&e.input_class,'" type="').concat(e.type,'" id="').concat(a.id,'" name="').concat(e.name,'" ').concat(!!a.required&&"required"," />")})),t+="</div>"})),t+='<input class="btn-submit" type="submit" class="button" value="'.concat(this.form.submit,'" /></form>'),e.innerHTML=t,this.formEl=document.querySelector("#"+this.form.id)}},{key:"validateData",value:function(e){var t,a={name:e[0].name,value:"error"};switch(e[0].type){case"text":t="Veuillez entrer au minimum 2 caractères !",e[0].value.length<2?a.hasError=t:(a.value=e[0].value,a.hasError=!1);break;case"email":t="Adresse Email invalide, merci de modifier",e[0].value.match(/^([\w.-]+)@([\w-]+)((\.(\w){2,6})+)$/)?(a.value=e[0].value,a.hasError=!1):a.hasError=t;break;case"number":t="Merci d'entrer une valeur numérique",e[0].value.match(/^\d+$/)?(a.value=e[0].value,a.hasError=!1):a.hasError=t;break;case"radio":t="Merci de sélectionner une localité";var n=e[0].parentElement.querySelectorAll(":checked");1!==n.length?a.hasError=t:(a.value=n[0].value,a.hasError=!1);break;case"checkbox":t="Merci de cocher la case conditions générales";var r=0,o={};e.forEach((function(e){!e.checked&&e.hasAttribute("required")?r+=1:o[e.id]=e.checked})),0!==r?a.hasError=t:(a.value=o,a.hasError=!1);break;case"date":t="Veuillez saisir une date de naissance valide";var i=Date.parse(e[0].value),s=Date.now(),l=Date.parse("1920-01-01");!isNaN(i)&&l<=i&&i<s?(a.value=e[0].value,a.hasError=!1):a.hasError=t}return a}},{key:"displayError",value:function(e,t){e.setAttribute("data-error",t),e.setAttribute("data-error-visible",!0)}},{key:"hideError",value:function(e){e.setAttribute("data-error-visible",!1)}},{key:"displayLoading",value:function(){var e=this.formEl.querySelector("input[type=submit]");this.formEl.className="sending",e.setAttribute("value","Envoi...")}},{key:"displaySuccessMsg",value:function(e){var t=this.formEl.offsetHeight,a=this.formEl.querySelector("input[type=submit]");this.sent=!0,this.formEl.querySelector(".success-msg").innerHTML=e,this.formEl.className="sending--success",this.formEl.style.height=t+"px",a.setAttribute("value","Fermer")}},{key:"send",value:function(e){var t=this;console.log(e),new Promise((function(e,a){t.displayLoading(),setTimeout((function(){return e("Success!")}),2e3)})).then((function(e){console.log(e),"Success!"===e&&t.displaySuccessMsg("Merci pour<br>votre inscription")})).catch((function(e){console.log(e),t.displaySuccessMsg("Une erreur est survenue<br>merci de rééssayer")}))}}])&&r(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),i=document.getElementById("myTopnav"),s=document.querySelector(".main-navbar");new a("reservation-modal",o,{id:"reservation-form",name:"reserve",action:"index.html",method:"post",submit:"C'est parti",data:[{type:"text",name:"first",input_class:"text-control",inputs:[{label:"Prénom",id:"first"}]},{type:"text",name:"last",input_class:"text-control",inputs:[{label:"Nom",id:"last"}]},{type:"email",name:"email",input_class:"text-control",inputs:[{label:"E-mail",id:"email"}]},{type:"date",name:"birthdate",input_class:"text-control",inputs:[{label:"Date de naissance",id:"birthdate"}]},{type:"number",name:"quantity",input_class:"text-control",inputs:[{label:"À combien de tournois GameOn avez-vous déjà participé ?",id:"quantity"}]},{type:"radio",name:"location",label_after:!0,before_html:'<p class="text-label">A quel tournoi souhaitez-vous participer cette année ?</p>',label_class:"checkbox-label",input_class:"checkbox-input",inputs:[{label:'<span class="checkbox-icon"></span>New York',id:"location1"},{label:'<span class="checkbox-icon"></span>San Francisco',id:"location2"},{label:'<span class="checkbox-icon"></span>Seatle',id:"location3"},{label:'<span class="checkbox-icon"></span>Chicago',id:"location4"},{label:'<span class="checkbox-icon"></span>Boston',id:"location5"},{label:'<span class="checkbox-icon"></span>Portland',id:"location6"}]},{type:"checkbox",name:"user-approval",label_after:!0,label_class:"checkbox2-label",input_class:"checkbox-input",inputs:[{label:"<span class=\"checkbox-icon\"></span>J'ai lu et accepté les conditions d'utilisation.",id:"terms-of-use",required:!0},{label:'<span class="checkbox-icon"></span>Je souhaite être prévenu des prochains évènements.',id:"newsletter"}]}]}),window.onresize=function(){i.classList.remove("responsive"),s.style.removeProperty("height")},window.editNav=function(){"topnav"===i.className?(i.className+=" responsive",s.style.height=s.scrollHeight+"px"):(i.className="topnav",s.style.height="0px")}}();